var blog={editor:"",init:function(){},initEditor:function(){blog.editor=new SimpleMDE({element:document.getElementById("MarkDownEditor"),toolbar:[{name:"savePost",action:function(){blog.savePost()},className:"fa fa-floppy-o",title:"Save Post"},"|","undo","redo","bold","italic","strikethrough","heading","|","quote","unordered-list","ordered-list","table","horizontal-rule","|","link","image",{name:"addMedia",action:function(){window.open("/Media","_blank")},className:"fa fa-folder-open",title:"add media"},"code","clean-block","|","preview","side-by-side","fullscreen","guide"]});blog.setAlertMessage("Auto save is on, post will be saved every 5 minutes");setTimeout(function(){blog.savePost()},3e5)},setAlertMessage:function(n,t){var i=$("#alertbanner"),r=$("#alertmessage");i.removeClass("alert-success");i.removeClass("alert-warning");i.removeClass("alert-danger");i.removeClass("alert-primary");i.addClass("alert-"+t);r.html(n);i.show().delay(3e4).fadeOut()},savePost:function(){var n=blog.getPost();$.ajax({type:"post",url:"/Blog/SavePost",data:n,success:function(n,t,i){if(i.status=="200"){n.isSuccess==!0?blog.setAlertMessage(n.message,"success"):blog.setAlertMessage(n.message,"danger");return}},error:function(n){n.status!="200"&&alert("Failed to save the post "+n.status+" "+n.statusText)},dataType:"json"})},getPost:function(){return{Id:$("#Id").val(),Title:$("#Title").val(),Content:blog.editor.value(),UtcPublishDate:$("#UtcPublishDate").val()}},initShowdown:function(){showdown.extension("bootstrap-tables",function(){return[{type:"output",filter:function(n){var t=$("<div><\/div>").html(n);return $("table",t).each(function(){var n=$(this);n.addClass("table table-striped table-bordered").wrap('<div class="class table-responsive"><\/div>')}),t.html()}}]})},getHtml:function(n){var t=new showdown.Converter({tables:!0,strikethrough:!0,extensions:["bootstrap-tables"]});return t.setFlavor("github"),t.makeHtml(n)},getPostContent:function(){var n=$("[data-postarea]");n.each(function(n,t){var i=$(t).find("input[type=hidden]").val(),r=$(t).find("[data-post]")[0];$.getJSON("/Blog/PostContent/"+i,function(n){n!=null&&n!=undefined&&(r.innerHTML=blog.getHtml(n.content))})})}};